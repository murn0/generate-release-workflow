name: Generate release
on:
  workflow_call:
    inputs:
      changelog_config_json:
        required: false
        type: string
permissions: {}
jobs:
  build-changelog:
    uses: ./.github/workflows/build-changelog.yaml
    permissions: {}
    with:
      changelog_config_json: ${{inputs.changelog_config_json}}
  bump-version:
    uses: ./.github/workflows/bump-version.yaml
    permissions: {}
    if: success()
    needs:
      - build-changelog
    with:
      changelog: ${{needs.build-changelog.outputs.changelog}}