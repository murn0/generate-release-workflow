name: Generate release
on:
  workflow_call:
    inputs:
      changelog_config_json:
        required: false
        type: string
      major_title:
        description: "Titles that fall under major version upgrades. e.g. ## ‚ö†Ô∏è Breaking Changes"
        required: true
        type: string
      minor_title:
        description: "Titles that fall under minor version upgrades. e.g. ## üöÄ Features"
        required: true
        type: string

permissions: {}
jobs:
  build-changelog:
    uses: ./.github/workflows/build-changelog.yaml
    permissions: {}
    with:
      changelog_config_json: ${{inputs.changelog_config_json}}
  bump-version:
    uses: ./.github/workflows/bump-version.yaml
    permissions: {}
    if: success()
    needs:
      - build-changelog
    with:
      changelog: ${{needs.build-changelog.outputs.changelog}}
      major_title: ${{inputs.major_title}}
      minor_title: ${{inputs.minor_title}}